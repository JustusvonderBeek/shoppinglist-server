/*
The default REST API tests for the server. Each cell can be executed on it's own but sometimes the results depend on what has been executed before.
*/
# Testing the authenticaiton by accessing default data

# @noRejectUnauthorized
GET https://localhost:46152/resource

HTTP/1.1 401  - Unauthorized
www-authenticate: Basic realm="Authorization Required"
date: Mon, 25 Dec 2023 11:41:58 GMT
content-length: 0
connection: close
###
# No again with basic HTTP authentication

# @noRejectUnauthorized
GET https://admin:secret@localhost:46152/resource

# # @noRejectUnauthorized
# GET https://localhost:46152/resource
# Authorization: Basic admin:secret
###
# Token Bearer Authentication

# Register and retrieve token
# @noRejectUnauthorized
POST https://admin:secret@localhost:46152/login
Content-Type application/json

###
# This is necessary to separate requests

@authToken={{response.parsedBody.token}}


# Use token to authenticate
# @noRejectUnauthorized
GET https://@localhost:46152/resource
Authorization: Bearer {{authToken}}

HTTP/1.1 200  - OK
content-type: application/json; charset=utf-8
date: Mon, 25 Dec 2023 17:33:07 GMT
content-length: 147
connection: close

HTTP/1.1 200  - OK
content-type: application/json; charset=utf-8
date: Mon, 25 Dec 2023 17:33:07 GMT
content-length: 24
connection: close
###
# The same authentication with JWT Tokens

# @noRejectUnauthorized
POST https://admin:secret@localhost:46152/login
Content-Type: application/json

###

@jwtToken = {{response.parsedBody.token}}

# @noRejectUnauthorized
GET https://localhost:46152/resource
Authorization: Bearer {{jwtToken}}

HTTP/1.1 200  - OK
content-type: application/json; charset=utf-8
date: Mon, 25 Dec 2023 17:33:41 GMT
content-length: 147
connection: close

HTTP/1.1 200  - OK
content-type: application/json; charset=utf-8
date: Mon, 25 Dec 2023 17:33:42 GMT
content-length: 24
connection: close
/*
# Below is the testing of the REST API
*/
###
# @noRejectUnauthorized

GET https://localhost:46152/items

HTTP/1.1 200  - OK
content-type: application/json; charset=utf-8
date: Mon, 25 Dec 2023 10:53:03 GMT
content-length: 4
connection: close
###
# @noRejectUnauthorized

GET https://localhost:46152/lists/1